# üå± Seed Actualizado - Base de Datos Chicoj

## üìã Resumen de Cambios

El archivo `seed.js` ha sido actualizado con las siguientes mejoras:

### ‚ú® Nuevas Caracter√≠sticas

1. **‚úÖ Campo `categoria` en todos los platillos**
2. **‚úÖ Nuevo rol: "Tour"**
3. **‚úÖ Nuevo usuario: tour1/tour123**
4. **‚úÖ 26 platillos en total (anteriormente 9)**
5. **‚úÖ Mayor variedad de categor√≠as**

---

## üë• Usuarios Disponibles

| Usuario    | Contrase√±a  | Rol            | Empleado              | Email                     |
|------------|-------------|----------------|-----------------------|---------------------------|
| admin      | admin123    | Administrador  | Admin Sistema         | admin@chicoj.com          |
| gerente1   | gerente123  | Gerente        | Mar√≠a L√≥pez           | gerente@chicoj.com        |
| cajero1    | cajero123   | Cajero         | Carlos Ram√≠rez        | cajero@chicoj.com         |
| mesero1    | mesero123   | Mesero         | Juan P√©rez            | mesero@chicoj.com         |
| cocina1    | cocina123   | Cocina         | Pedro Gonz√°lez        | cocina1@chicoj.com        |
| bebidas1   | bebidas123  | Cocina         | Ana Mart√≠nez          | bebidas1@chicoj.com       |
| coffee1    | coffee123   | Cocina         | Luis Fern√°ndez        | coffee1@chicoj.com        |
| **tour1**  | **tour123** | **Tour** ‚≠ê   | **Sofia M√©ndez** ‚≠ê   | **tour@chicoj.com** ‚≠ê    |

---

## üçΩÔ∏è Platillos por √Årea

### 1. üç≥ Cocina (15 platillos)

#### Desayunos (3)
- **Desayuno Chap√≠n** - Q35.00
  - Huevos, frijoles, pl√°tano, queso y tortillas
- **Huevos con Longaniza** - Q40.00
  - Huevos revueltos con longaniza guatemalteca
- **Panqueques** - Q30.00
  - Panqueques con miel y fruta

#### Almuerzos (5)
- **Pepi√°n de Pollo** - Q65.00
  - Plato t√≠pico guatemalteco con especias tradicionales
- **Hilachas** - Q55.00
  - Carne de res deshilachada en salsa de tomate
- **Kaq Ik** - Q70.00
  - Caldo de chompipe con chile y especias
- **Churrasco Chap√≠n** - Q85.00
  - Carne asada con chimol y guacamol
- **Pollo Encebollado** - Q50.00
  - Pechuga de pollo con cebolla y salsa

#### Men√∫ Infantil (2)
- **Nuggets con Papas** - Q35.00
  - Nuggets de pollo con papas fritas
- **Mini Hamburguesa** - Q38.00
  - Hamburguesa peque√±a con papas

#### Refacciones (2)
- **Sandwich de Pollo** - Q28.00
  - Sandwich de pollo con vegetales frescos
- **Ensalada Mixta** - Q25.00
  - Ensalada fresca con aderezo

#### Refacciones T√≠picas (3)
- **Tamalitos de Chipil√≠n** - Q20.00
  - Tamalitos con hojas de chipil√≠n
- **Pl√°tanos Fritos** - Q25.00
  - Pl√°tanos maduros fritos con crema y frijoles
- **Chuchitos** - Q18.00
  - Tamalitos guatemaltecos con salsa

---

### 2. üçπ Bebidas (13 platillos)

#### Bebidas Fr√≠as (4)
- **Limonada Natural** - Q15.00
  - Limonada fresca natural
- **Jugo de Naranja** - Q18.00
  - Jugo de naranja reci√©n exprimido
- **Agua Mineral** - Q12.00
  - Agua mineral con gas o sin gas
- **T√© Helado** - Q16.00
  - T√© fr√≠o con lim√≥n

#### Licuados (3)
- **Licuado de Fresa** - Q22.00
  - Licuado natural de fresa con leche
- **Licuado de Banano** - Q20.00
  - Licuado de banano con leche y miel
- **Licuado de Papaya** - Q22.00
  - Licuado tropical de papaya

#### Cervezas (3)
- **Cerveza Nacional** - Q25.00
  - Cerveza guatemalteca fr√≠a
- **Cerveza Importada** - Q35.00
  - Cerveza importada premium
- **Michelada** - Q30.00
  - Cerveza preparada con lim√≥n y sal

#### Bebidas Desechables (3)
- **Refresco Lata** - Q10.00
  - Bebida gaseosa en lata
- **Agua Purificada** - Q8.00
  - Botella de agua purificada
- **Jugo Envasado** - Q12.00
  - Jugo de caja en varios sabores

---

### 3. ‚òï Coffee (13 platillos)

#### Caf√© (7)
- **Caf√© Americano** - Q18.00
  - Caf√© negro tradicional
- **Capuccino** - Q25.00
  - Caf√© con leche espumada y canela
- **Caf√© Latte** - Q28.00
  - Caf√© con leche vaporizada
- **Espresso** - Q20.00
  - Caf√© concentrado italiano
- **Caf√© Moka** - Q30.00
  - Caf√© con chocolate y crema
- **Frappe** - Q32.00
  - Caf√© helado batido con hielo
- **Caf√© con Leche** - Q22.00
  - Caf√© tradicional con leche caliente

#### Postres (6)
- **Rellenitos de Pl√°tano** - Q15.00
  - Postre t√≠pico guatemalteco de pl√°tano con frijol
- **Pastel de Chocolate** - Q22.00
  - Porci√≥n de pastel de chocolate h√∫medo
- **Pie de Manzana** - Q24.00
  - Pie de manzana con canela
- **Churros con Chocolate** - Q20.00
  - Churros crujientes con chocolate caliente
- **Tres Leches** - Q26.00
  - Pastel de tres leches tradicional
- **Flan de Caramelo** - Q18.00
  - Flan casero con caramelo

---

## üìä Estad√≠sticas

| √Årea     | Total Platillos | Categor√≠as                                                                |
|----------|-----------------|---------------------------------------------------------------------------|
| Cocina   | 15              | Desayunos (3), Almuerzos (5), Menu Infantil (2), Refacciones (2), Refacciones Tipicas (3) |
| Bebidas  | 13              | Bebidas Frias (4), Licuados (3), Cervezas (3), Bebidas Desechables (3)  |
| Coffee   | 13              | Cafe (7), Postres (6)                                                     |
| **TOTAL**| **41**          | **12 categor√≠as √∫nicas**                                                  |

---

## üöÄ C√≥mo Ejecutar el Seed

### Opci√≥n 1: Script PowerShell (Recomendado)

```powershell
.\ejecutar-seed.ps1
```

### Opci√≥n 2: Docker Exec

```powershell
docker exec chicoj-backend npm run seed
```

### Opci√≥n 3: Desde el contenedor

```bash
docker exec -it chicoj-backend sh
npm run seed
```

---

## ‚ö†Ô∏è Notas Importantes

1. **Upsert**: El seed usa operaciones `upsert`, lo que significa que:
   - Si un registro no existe, se crea
   - Si ya existe, se actualiza con los datos del seed
   - No duplica datos si se ejecuta m√∫ltiples veces

2. **Contrase√±as**: Todas las contrase√±as est√°n hasheadas con `bcrypt` (10 rounds)

3. **Campo `categoria`**: Aseg√∫rate de que la columna `categoria` exista en la tabla `platillos`:
   ```sql
   ALTER TABLE platillos ADD COLUMN categoria VARCHAR(100);
   CREATE INDEX ix_platillos_categoria ON platillos(categoria);
   ```

4. **Rol Tour**: El nuevo rol "Tour" tiene permisos espec√≠ficos para gesti√≥n de tours y reservas

---

## üéØ Casos de Uso

### Usuario Tour
El usuario `tour1` est√° dise√±ado para:
- ‚úÖ Gestionar reservas de tours
- ‚úÖ Ver disponibilidad de tours
- ‚úÖ Registrar nuevos tours
- ‚úÖ Generar reportes de tours
- ‚úÖ Administrar itinerarios

### Categor√≠as de Platillos
Las categor√≠as permiten:
- ‚úÖ Filtrar platillos por tipo
- ‚úÖ Generar reportes por categor√≠a
- ‚úÖ Organizar el men√∫ visualmente
- ‚úÖ Facilitar la b√∫squeda de platillos
- ‚úÖ Analizar ventas por categor√≠a

---

## üìù Verificaci√≥n Post-Seed

Despu√©s de ejecutar el seed, verifica que todo est√© correcto:

```sql
-- Verificar roles
SELECT * FROM roles;

-- Verificar usuarios
SELECT u.usuario_nombre, e.nombre, e.apellidos, r.nombre_rol 
FROM usuarios u
JOIN empleados e ON u.id_empleado = e.id_empleado
JOIN roles r ON u.id_rol = r.id_rol;

-- Verificar platillos con categor√≠as
SELECT nombre, categoria, precio, a.nombre as area
FROM platillos p
JOIN area a ON p.id_area = a.id_area
ORDER BY a.nombre, categoria, nombre;

-- Contar platillos por categor√≠a
SELECT categoria, COUNT(*) as total
FROM platillos
GROUP BY categoria
ORDER BY total DESC;
```

---

## üîÑ Actualizar desde Seed Anterior

Si ya tienes un sistema con datos, puedes:

1. **Mantener datos existentes**: El seed solo crear√° lo que no existe
2. **Agregar el usuario tour**: Se crear√° autom√°ticamente
3. **Actualizar platillos**: Los existentes se actualizar√°n con las nuevas categor√≠as
4. **Agregar nuevos platillos**: Se crear√°n los que no existan

---

## üìû Soporte

Si encuentras alg√∫n problema con el seed:

1. Verifica que el contenedor `chicoj-backend` est√© corriendo
2. Verifica que el contenedor `chicoj-postgres` est√© corriendo
3. Revisa los logs del backend: `docker logs chicoj-backend`
4. Verifica la conexi√≥n a la base de datos en el archivo `.env`

---

**√öltima actualizaci√≥n**: Noviembre 3, 2025  
**Versi√≥n**: 2.0  
**Autor**: Sistema Chicoj

