<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Control de Platillos - Chicoj</title>
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon-96x96.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  
  <!-- IMPORTANTE: Auth simple sin interferir -->
  <script src="/scripts/simple-auth.js?v=20251108cache"></script>
  
  <!-- Meta tags para prevenir caché -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <link rel="stylesheet" href="/css/base.css?v=20251108cache">
  <link rel="stylesheet" href="/css/components.css?v=20251108cache">
  <link rel="stylesheet" href="/css/utilities.css?v=20251108cache">
  <link rel="stylesheet" href="/css/mejoras-ux.css?v=20251108cache">
  <link rel="stylesheet" href="/css/tablas-modernas.css?v=20251108cache">
  <link rel="stylesheet" href="/css/estilos-control-platillos.css?v=20251108cache">
  <link rel="stylesheet" href="/css/responsive.css?v=20251108cache">
  <link rel="stylesheet" href="/css/responsive-platillos.css?v=20251108cache">
</head>
<body>
  <div class="contenedor-app">

    <!-- Header -->
    <header class="encabezado">
      <div class="brand">
        <div class="logo-placeholder" aria-label="Logo"></div>
        <div>
          <span class="badge">Somos</span>
          <h1>Restaurante Chicoj</h1>
        </div>
      </div>
      <nav class="acciones" aria-label="Acciones">
        <a class="btn btn-outline" href="/main">Inicio</a>
        <a class="btn btn-primary" href="#" onclick="return ultraSimpleLogout(event)">Cerrar sesión</a>
      </nav>
    </header>

    <!-- Contenido -->
    <main class="contenido" role="main">
      <section class="tabla-container">
        <div class="tabla-header">
          <h2>Lista de platillos</h2>
          <a class="btn btn-success" href="/templates/administracion/platillo">+ Agregar platillo</a>
        </div>

        <!-- Barra de búsqueda -->
        <div class="search-container">
          <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input 
              type="text" 
              id="search-input" 
              class="search-input" 
              placeholder="Buscar platillo por nombre..."
              autocomplete="off"
            />
            <button id="clear-search" class="clear-search" style="display: none;" title="Limpiar búsqueda">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
          <div id="search-results-info" class="search-results-info"></div>
        </div>

        <!-- Lista tipo tabla (se llena dinámicamente con platillos agrupados por área) -->
        <div class="tabla-platillos" role="table" aria-label="Platillos">
          <div style="text-align: center; padding: 40px; color: var(--muted);">
            <p>Cargando platillos...</p>
          </div>
        </div>
      </section>
    </main>

    <footer class="pie-pagina">
      <p>© Derechos Reservados</p>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="/scripts/ultra-simple-logout.js?v=20251108cache"></script>
  <script src="/scripts/config.js?v=20251108cache"></script>
  <script src="/scripts/api.js?v=20251108cache"></script>
  <script src="/scripts/control-platillos.js?v=20251108cache"></script>
  
  <!-- Estilos para búsqueda -->
  <style>
    .search-container {
      margin: 1.5rem 0;
      padding: 0 1rem;
    }
    
    .search-box {
      position: relative;
      max-width: 500px;
      margin: 0 auto;
    }
    
    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      pointer-events: none;
    }
    
    .search-input {
      width: 100%;
      padding: 0.75rem 3rem 0.75rem 3rem;
      border: 2px solid #e0e0e0;
      border-radius: var(--r-md);
      font-size: 1rem;
      transition: all 0.3s;
      background: white;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
    }
    
    .search-input::placeholder {
      color: var(--muted);
    }
    
    .clear-search {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      color: var(--muted);
      transition: all 0.2s;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .clear-search:hover {
      color: var(--danger);
      background: rgba(244, 67, 54, 0.1);
    }
    
    .search-results-info {
      text-align: center;
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--muted);
    }
    
    .search-results-info.highlight {
      color: var(--primary);
      font-weight: 600;
    }
    
    /* Resaltar texto encontrado */
    .highlight-text {
      background: #fff59d;
      padding: 0.1rem 0.2rem;
      border-radius: 2px;
      font-weight: 600;
    }
    
    /* Área sin resultados */
    .area-section.no-results {
      opacity: 0.5;
    }
  </style>
</body>
</html>
